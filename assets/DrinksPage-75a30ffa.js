import{r as s,_ as A,a as M,j as r,L as B}from"./index-a374ad1e.js";import{_ as G,c as T,a as _,v as U,g as q,b as z,u as H,S as J}from"./useStateManager-7e1e8489.esm-b96fc85e.js";import{a as Q}from"./operationsDrinks-46f1e3ce.js";import{N as X}from"./NotFound-30ff8228.js";import{g as Y,a as Z}from"./operationsFilters-a267b76d.js";var ee=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],F=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=String(n).toLowerCase(),c=String(i.getOptionValue(t)).toLowerCase(),l=String(i.getOptionLabel(t)).toLowerCase();return c===o||l===o},P={formatCreateLabel:function(n){return'Create "'.concat(n,'"')},isValidNewOption:function(n,t,i,o){return!(!n||t.some(function(c){return F(n,c,o)})||i.some(function(c){return F(n,c,o)}))},getNewOptionData:function(n,t){return{label:t,value:n,__isNew__:!0}}};function te(e){var n=e.allowCreateWhileLoading,t=n===void 0?!1:n,i=e.createOptionPosition,o=i===void 0?"last":i,c=e.formatCreateLabel,l=c===void 0?P.formatCreateLabel:c,d=e.isValidNewOption,h=d===void 0?P.isValidNewOption:d,y=e.getNewOptionData,C=y===void 0?P.getNewOptionData:y,w=e.onCreateOption,b=e.options,f=b===void 0?[]:b,m=e.onChange,u=G(e,ee),k=u.getOptionValue,x=k===void 0?q:k,j=u.getOptionLabel,D=j===void 0?z:j,g=u.inputValue,a=u.isLoading,O=u.isMulti,v=u.value,N=u.name,p=s.useMemo(function(){return h(g,T(v),f,{getOptionValue:x,getOptionLabel:D})?C(g,l(g)):void 0},[l,C,D,x,g,h,f,v]),E=s.useMemo(function(){return(t||!a)&&p?o==="first"?[p].concat(_(f)):[].concat(_(f),[p]):f},[t,o,a,p,f]),L=s.useCallback(function(S,I){if(I.action!=="select-option")return m(S,I);var R=Array.isArray(S)?S:[S];if(R[R.length-1]===p){if(w)w(g);else{var $=C(g,g),W={action:"create-option",name:N,option:$};m(U(O,[].concat(_(T(v)),[$]),$),W)}return}m(S,I)},[C,g,O,N,p,w,m,v]);return A(A({},u),{},{options:E,onChange:L})}var ne=s.forwardRef(function(e,n){var t=H(e),i=te(t);return s.createElement(J,M({ref:n},i))}),V=ne;const K=(e=[])=>e.length===0?{}:e.map(t=>({value:t,label:t.toUpperCase()})),ae=({categoryList:e,ingredientList:n,page:t,per_page:i,passDataToDrinks:o})=>{const[c,l]=s.useState(""),[d,h]=s.useState(""),[y,C]=s.useState(""),[w,b]=s.useState(""),[f,m]=s.useState(!1);s.useEffect(()=>{(async(O,v,N,p="1",E="10")=>{try{m(!0);const{drinks:L}=await Q(c,v,N,p,E);o(L)}catch(L){if(L.code!=="ERR_CANCELED")throw console.log(L),Error("Oops! Something went wrong! Try reloading the page!")}finally{m(!1)}})(d,y,w,t,i)},[y,w,c,t,i]);const u=(a,O)=>{switch(a){case"keyword":h(O);break}},k=a=>{if(c)switch(a.key){case"Enter":case"Tab":d&&(h([...d,x(c)]),l("")),a.preventDefault();break}},x=a=>({label:a,value:a}),j=a=>{l(a)},D=(a,O)=>{C(a?a.value:"")},g=(a,O)=>{b(a?a.value:"")};return r.jsxs("div",{className:"container",children:[r.jsx(V,{isClearable:!0,menuIsOpen:!1,placeholder:"Enter the text",components:{DropdownIndicator:null},inputValue:c,value:d,onChange:a=>u("keyword",a),onKeyDown:k,onInputChange:j}),r.jsx(V,{isClearable:!0,options:K(e),onChange:D}),r.jsx(V,{isClearable:!0,placeholder:"Ingredients",options:K(n),onChange:g})]})},re=({drinkItem:e})=>{const{_id:n,drink:t,drinkThumb:i}=e;return r.jsxs("li",{onClick:o=>{onGalleryItemClick(o.target.id)},children:[r.jsx("img",{src:i,alt:t,id:n}),r.jsx("h3",{children:t}),r.jsx(B,{to:`/drink/${n}`,children:"See more"})]})},oe=({categoryList:e=[],ingredientList:n=[]})=>{const[t,i]=s.useState([]);return s.useState(1),s.useState(10),s.useState(!1),r.jsxs(r.Fragment,{children:[r.jsx(ae,{categoryList:e,ingredientList:n,passDataToDrinks:o=>{console.log(o),i(o)}}),t.lenght!==0?r.jsx(r.Fragment,{children:r.jsx("div",{children:r.jsx("ul",{children:t.map(o=>r.jsx(re,{drinkItem:o,id:o.id},o.id))})})}):r.jsx(X,{})]})},ge=()=>{const[e,n]=s.useState([]),[t,i]=s.useState([]);return s.useEffect(()=>{(async()=>{try{const l=await Y();n(l)}catch(l){if(l.code!=="ERR_CANCELED")throw console.log(l),Error("Oops! Something went wrong! Try reloading the page!")}})(),(async()=>{try{const d=(await Z()).map(h=>h.title);i(d)}catch(l){if(l.code!=="ERR_CANCELED")throw console.log(l),Error("Oops! Something went wrong! Try reloading the page!")}})()},[]),r.jsxs(r.Fragment,{children:[r.jsx("h1",{children:"Drinks"}),r.jsx(oe,{categoryList:e,ingredientList:t})]})};export{ge as default};
